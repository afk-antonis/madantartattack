<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>MAD ANT ART ATTACK</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: #f0f0f0;
  }
  #toolbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 240px;
    height: 60px;
    background: rgba(255,255,255,0.85);
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    z-index: 10;
  }
  #antCounter {
    position: fixed;
    top: 0;
    right: 0;
    width: 240px;
    height: 60px;
    background: rgba(255,255,255,0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    z-index: 10;
  }
  #canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: white;
    cursor: crosshair;
  }
  .ant {
    position: absolute;
    width: 24px;
    height: 24px;
    background-size: contain;
    background-repeat: no-repeat;
    pointer-events: none;
  }
  #footer {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.6);
    padding: 4px 10px;
    z-index: 10;
    font-size: 12px;
  }
</style>
</head>
<body>
<div id="toolbar">
  <select id="mode">
    <option value="pen">Pen</option>
    <option value="egg">Egg</option>
  </select>
  <input type="color" id="penColor" value="#000000" />
  <input type="range" id="penSize" min="1" max="40" value="4" />
  <button id="dropEgg">Drop Egg</button>
  <button id="clear">Clear</button>
</div>
<div id="antCounter">Ants: <span id="antCount">0</span></div>
<canvas id="canvas"></canvas>
<div id="footer">MAD ANT ART ATTACK</div>
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;

let mode = 'pen';
let drawing = false;
let ants = [];

const antImgURL = 'ant.png'; // user will replace

const modeSel = document.getElementById('mode');
const penColor = document.getElementById('penColor');
const penSize = document.getElementById('penSize');

modeSel.onchange = () => mode = modeSel.value;

canvas.addEventListener('mousedown', e => {
  if (mode === 'pen') {
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.clientX, e.clientY);
  }
});

canvas.addEventListener('mousemove', e => {
  if (mode === 'pen' && drawing) {
    ctx.strokeStyle = penColor.value;
    ctx.lineWidth = penSize.value;
    ctx.lineCap = 'round';
    ctx.lineTo(e.clientX, e.clientY);
    ctx.stroke();
  }
});
canvas.addEventListener('mouseup', () => drawing = false);
canvas.addEventListener('mouseleave', () => drawing = false);

// Egg throwing: eggs fall toward camera -> simulate diagonal drop
function dropEgg() {
  const x = Math.random() * canvas.width;
  const yStart = -200;
  const eggSize = 40; // fixed realistic size

  const egg = { x, y: yStart, vy: 25 + Math.random()*10, size: eggSize, alive:true };

  function animateEgg() {
    if (!egg.alive) return;
    egg.y += egg.vy;

    if (egg.y > canvas.height - 20) {
      egg.alive = false;
      splash(egg.x, canvas.height - 20);
      return;
    }

    requestAnimationFrame(animateEgg);
  }

  animateEgg();
}

document.getElementById('dropEgg').onclick = dropEgg;

function splash(x, y) {
  const r = 20 + Math.random()*20;
  ctx.fillStyle = penColor.value;
  for (let i=0; i<12; i++) {
    const a = Math.random()*Math.PI*2;
    const dist = r * Math.random();
    ctx.beginPath();
    ctx.arc(x + Math.cos(a)*dist, y + Math.sin(a)*dist, 6*Math.random(), 0, Math.PI*2);
    ctx.fill();
  }
}

document.getElementById('clear').onclick = () => {
  ctx.clearRect(0,0,canvas.width,canvas.height);
};

// Ants
function spawnAnt() {
  const el = document.createElement('div');
  el.className = 'ant';
  el.style.backgroundImage = `url(${antImgURL})`;
  document.body.appendChild(el);
  const ant = { el, x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: (Math.random()-0.5)*4, vy:(Math.random()-0.5)*4 };
  ants.push(ant);
  document.getElementById('antCount').textContent = ants.length;
}

setInterval(() => { if (Math.random()<0.2) spawnAnt(); }, 2000);

function updateAnts() {
  ants.forEach(a => {
    a.x += a.vx;
    a.y += a.vy;
    if (a.x<0||a.x>canvas.width) a.vx*=-1;
    if (a.y<0||a.y>canvas.height) a.vy*=-1;

    // interaction only with paint: sample pixel alpha
    const pix = ctx.getImageData(a.x, a.y, 1, 1).data;
    const painted = pix[3] > 10;
    if (painted) {
      // smear
      ctx.globalAlpha = 0.3;
      ctx.beginPath();
      ctx.arc(a.x, a.y, 3, 0, Math.PI*2);
      ctx.fillStyle = 'black';
      ctx.fill();
      ctx.globalAlpha = 1;
    }

    a.el.style.left = a.x + 'px';
    a.el.style.top = a.y + 'px';
  });
  requestAnimationFrame(updateAnts);
}
updateAnts();
</script>
</body>
</html>
